---
layout: layouts/base.html
---

<div x-data="{
    search: '',
    show_call(el) {
        return this.search === '' || el.getAttribute('data-title').toLowerCase().includes(this.search.toLowerCase());
    },
    sort_calls(order) {
        const calls = Array.from(this.$refs.calls.children);
        switch (order) {
            case 'title':
            case 'journal':
                calls.sort((a, b) => {
                    const aAttribute = a.getAttribute(`data-${order}`);
                    const bAttribute = b.getAttribute(`data-${order}`);
                    return aAttribute.localeCompare(bAttribute);
                });
                break;
            case 'pubdate':
            case 'duedate':
                calls.sort((a, b) => {
                    const aAttribute = a.getAttribute(`data-${order}`);
                    const bAttribute = b.getAttribute(`data-${order}`);
                    return Date.parse(bAttribute) - Date.parse(aAttribute);
                });
                break;
        }
        calls.forEach(call => this.$refs.calls.appendChild(call));
    },
}" @keydown.window.prevent.ctrl.k="$refs.search.focus()">
    <div class="flex justify-between items-center mb-8">
        {% include "searchBox.html" %}
        {% include "sortDropdown.html" %}
    </div>
    {{ content | safe }}
</div>