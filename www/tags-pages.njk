---js
{
  pagination: {
    data: "calls",
    size: 1,
    alias: "tag",
    addAllPagesToCollections: true,
    before: function (paginationData, fullData) {
      let tagGroups = [];
      paginationData.forEach(call => {
        if (!Array.isArray(call.tags)) {
          console.warn('Warning: Call does not have a valid tags array', call);
          return;
        }

        call.tags.forEach(tag => {
          let tagGroup = tagGroups.find(group => group.name === tag);
          if (!tagGroup) {
            tagGroup = { name: tag, calls: [] };
            tagGroups.push(tagGroup);
          }
          const callWithoutTags = { ...call };
          tagGroup.calls.push(callWithoutTags);
        });
      });
      return tagGroups;
    }
  },
  layout: "layouts/main.html",
  permalink: "tag/{{ tag.name | slug }}/",
  eleventyComputed: {
    title: "Calls for Papers | {{ tag.name }}",
    description: "Calls for Papers shows you the latest calls for papers for {{ tag.name }}, easily accessible, in one location."
  }
}
---

<h1 class="text-4xl font-extrabold leading-tight mb-8">
  Tag: #{{ tag.name }}
  <a href="/tag/{{ tag.name | slug }}.xml" class="ml-4 plausible-event-name=RSS+Tag">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 inline" fill="currentColor" viewBox="0 0 100 100">
        <path d="M12.8,2.5c-3.7,0-6.7,3-6.7,6.7s3,6.7,6.7,6.7c39.3,0,71.3,32,71.3,71.3c0,3.7,3,6.7,6.7,6.7c3.7,0,6.7-3,6.7-6.7     C97.5,40.5,59.5,2.5,12.8,2.5z"/>
        <path d="M12.8,27.3c-3.7,0-6.7,3-6.7,6.7s3,6.7,6.7,6.7c25.7,0,46.6,20.9,46.6,46.5c0,3.7,3,6.7,6.7,6.7c3.7,0,6.7-3,6.7-6.7     C72.7,54.1,45.8,27.3,12.8,27.3z"/>
        <path d="M12.8,52c-3.7,0-6.7,3-6.7,6.7s3,6.7,6.7,6.7c12,0,21.8,9.7,21.8,21.7c0,3.7,3,6.7,6.7,6.7s6.7-3,6.7-6.7     C47.9,67.8,32.2,52,12.8,52z"/>
        <path d="M12.8,76.8c-5.7,0-10.3,4.6-10.3,10.3c0,5.7,4.6,10.4,10.3,10.4c5.7,0,10.4-4.7,10.4-10.4C23.2,81.4,18.5,76.8,12.8,76.8     z"/>
    </svg>
  </a>
</h1>
<div x-ref="calls" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
{% for call in tag.calls | isActiveCall %}
{% include "call-card.html" %}
{% endfor %}
</div>